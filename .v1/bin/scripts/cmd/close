#!/bin/bash

pathspec=$1
issue=""

while [[ "$#" -gt 0 ]]; do
    case $1 in
#        -f|--file) issue="$2"; shift ;;
        -i|--issue) issue="$2"; shift ;;
        *) issue=$1; shift ;;
#        *) echo "Unknown parameter passed: $1"; exit 1 ;;
    esac
    shift
done

if [[ -z "$pathspec" ]]
then
    echo -e "🍎 Alphabet\nSmart Commit\n- Error: Path to add files/directories required"
    exit 1
fi

if [[ -z "$issue" ]]
then
    echo "Issue number required"
    exit 1
fi

echo "💡 Close Issue #${issue}";
read -r -p "Alphabet > Smart Commit: Are you sure you want close issue #${issue}? [Yes/No] " response
if [[ "$response" =~ ^([yY][eE][sS]|[yY])$ ]]
then
  echo "Closing issue with smart commit: ${issue}"
  [[ -d ${pathspec} ]] && git add ${pathspec} && commit -am "#${issue}: #close"
else
  echo "Smart commit cancelled by user"
fi


##echo "Usernamex: $username";
